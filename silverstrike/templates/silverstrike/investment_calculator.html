{% extends 'silverstrike/base.html' %}
{% load i18n %}
{% load static %}

{% block content_header %}
<h1>{% trans 'Investment Calculator' %}</h1>
<ol class="breadcrumb">
  <li><a href="/">{% trans 'Home' %}</a></li>
  <li class="active">{% trans 'Charts' %}</li>
</ol>
{% endblock %}
{% block content %}
<div class="row">
<div class="col-md-8">
<div class="box">
  <div class="box-header">
    <h3 class="box-title">New Security balance</h3>
  </div>
  <div class="box-body">
      <table class="table table-striped">
          <tr>
            <th>{% trans 'Securities' %}</th>
            <th>New Quantity</th>
            <th>Difference</th>
            <th>Total Price</th>


          </tr>
         <tr>
            <td>VEA</td>
            <td>{{element}}</td>
            <td {% if element < 0 %} class="text-green"{% else %} class="text-red" {% endif %}>+10</td>
            <td>120 €</td>

        </tr>
        <tr>
            <th>{% trans 'Delta' %}</th>
            {% for element in worldDistributionDelta.items %}
            <td>{{ element.1 | floatformat:2}}%</td>
            {% endfor %}

        </tr>
       </table>
  </div>
</div>
</div>
<div class="col-md-3">
  <div class="box">
    <div class="box-header">
      <h3 class="box-title">Value Change</h3>
    </div>
    <div class="box-body">
      <table class="table">
        <form action="">
          <tr>
              <th>{% trans 'Amount' %}</th><td><input type="number"></td><td>€</td>

            </tr>
            <tr>
              <th>{% trans 'Buy' %}</th><td><input type="radio" name="operation" value="buy"></td>

            </tr>
            <tr>
              <th>{% trans 'Sell' %}</th><td><input type="radio" name="operation" value="sell"></td>
            </tr>
            <tr>
                <td><input type="submit" class="btn btn-primary" value="Calculate"></td>
            </tr>
        </form>
        </table>
    </div>
  </div>
</div>
</div>
<div class="row">
<div class="col-md-8">
  <div class="box">
    <div class="box-header">
      <h3 class="box-title">World Distribution</h3>
    </div>
    <div class="box-body">

    </div>
  </div>
</div><div class="col-md-3">
  <div class="box">
    <div class="box-header">
      <h3 class="box-title">Asset Distribution</h3>
    </div>
    <div class="box-body">
      <table class="table table-striped">
        <tr>
          <th></th><th>{% trans 'Stocks' %}</th><th>{% trans 'REIT' %}</th><th>{% trans 'Bonds' %}</th>
        </tr>
        <tr>
          <th>{% trans 'Actual' %}</th><td>{{ stocksWeight | floatformat:2 }} %</td><td>{{ REITWeight | floatformat:2}} %</td><td>{{ bondsWeight | floatformat:2}} %</td>
        </tr>
        <tr>
          <th>{% trans 'Delta' %}</th><td>{{ stocksWeightDelta | floatformat:2 }} %</td><td>{{ REITWeightDelta | floatformat:2 }} %</td><td>{{ BondWeightDelta | floatformat:2 }} %</td>
        </tr>
        </table>
    </div>
  </div>
</div>
{% for securityType,securityList in securities.items %}
<div class="col-md-12">
  <div class="box">
    <div class="box-header">
      <h3 class="box-title">{{securityType}}</h3>
    </div>
    <div class="box-body">
      <table class="table table-striped">
          <tr>
            <th>{% trans 'Weight' %}</th>
            <th>{% trans 'Ticker' %}</th>
            <th>{% trans 'Quantity' %}</th>
            <th>{% trans 'Current Price' %}</th>
            <th>{% trans 'Average Price' %}</th>
            <th>{% trans 'Total Price' %}</th>
            <th>{% trans 'Total Return' %}</th>
            <th>{% trans 'YTD Return' %}</th>
          </tr>
        {% for security in securityList %}
        <tr>
          <td>{{ security.weight | floatformat:2 }} %</td>
          <td>{{ security.ticker }}</td>
          <td>{{ security.quantity }}</td>
          <td>{{ security.currentPrice | floatformat:2 }} €</td>
          <td>{{ security.averagePrice | floatformat:2 }} €</td>
          <td>{{ security.totalPrice | floatformat:2 }} €</td>
          <td {% if security.totalReturn >= 0 %} class="text-green"{% else %} class="text-red" {% endif %}>{{ security.totalReturn | floatformat:2 }} %</td>
          <td>{{ security.ytdReturn }}</td>
        </tr>
        {% endfor %}
       </table>
    </div>
  </div>
</div>
{% endfor %}

{% endblock %}